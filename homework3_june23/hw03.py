import sys
from pathlib import Path
from colorama import init, Fore, Style

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è colorama –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∫–æ–ª—å–æ—Ä—ñ–≤ —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ
init(autoreset=True)

def display_directory_structure(path, indent_level=0):
    """
    –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º –≤–∏–≤–µ–¥–µ–Ω–Ω—è–º.

    Args:
        path (Path): –û–±'—î–∫—Ç Path, —â–æ –≤–∫–∞–∑—É—î –Ω–∞ –ø–æ—Ç–æ—á–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –∞–±–æ —Ñ–∞–π–ª.
        indent_level (int): –†—ñ–≤–µ–Ω—å –≤—ñ–¥—Å—Ç—É–ø—É –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó —ñ—î—Ä–∞—Ä—Ö—ñ—ó.
    """
    prefix = "  " * indent_level
    if indent_level > 0:
        prefix += "‚î£ " if path.is_dir() else "‚î£ üìú"

    if path.is_dir():
        # –í–∏–≤–µ–¥–µ–Ω–Ω—è —ñ–º–µ–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Å–∏–Ω—ñ–º –∫–æ–ª—å–æ—Ä–æ–º
        print(f"{prefix}{Fore.BLUE}üìÇ{path.name}{Style.RESET_ALL}")
        # –†–µ–∫—É—Ä—Å–∏–≤–Ω–∏–π –≤–∏–∫–ª–∏–∫ –¥–ª—è –ø—ñ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —Ç–∞ —Ñ–∞–π–ª—ñ–≤
        for item in sorted(path.iterdir()):
            display_directory_structure(item, indent_level + 1)
    elif path.is_file():
        # –í–∏–≤–µ–¥–µ–Ω–Ω—è —ñ–º–µ–Ω—ñ —Ñ–∞–π–ª—É –∑–µ–ª–µ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º
        print(f"{prefix}{Fore.GREEN}{path.name}{Style.RESET_ALL}")

def main():
    """
    –ì–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è —Å–∫—Ä–∏–ø—Ç–∞, —è–∫–∞ –æ–±—Ä–æ–±–ª—è—î –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
    —Ç–∞ –∑–∞–ø—É—Å–∫–∞—î –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.
    """
    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∞—Ä–≥—É–º–µ–Ω—Ç—É –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
    if len(sys.argv) < 2:
        print(f"{Fore.RED}–ü–æ–º–∏–ª–∫–∞: –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∫–∞–∂—ñ—Ç—å —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.")
        print(f"–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: python {Path(__file__).name} <—à–ª—è—Ö_–¥–æ_–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó>{Style.RESET_ALL}")
        sys.exit(1)

    # –û—Ç—Ä–∏–º–∞–Ω–Ω—è —à–ª—è—Ö—É –∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
    target_path = Path(sys.argv[1])

    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —à–ª—è—Ö—É
    if not target_path.exists():
        print(f"{Fore.RED}–ü–æ–º–∏–ª–∫–∞: –í–∫–∞–∑–∞–Ω–∏–π —à–ª—è—Ö '{target_path}' –Ω–µ —ñ—Å–Ω—É—î.{Style.RESET_ALL}")
        sys.exit(1)

    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —î —à–ª—è—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é
    if not target_path.is_dir():
        print(f"{Fore.RED}–ü–æ–º–∏–ª–∫–∞: –í–∫–∞–∑–∞–Ω–∏–π —à–ª—è—Ö '{target_path}' –Ω–µ —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é.{Style.RESET_ALL}")
        sys.exit(1)

    print(f"{Fore.CYAN}–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó: '{target_path}'{Style.RESET_ALL}\n")
    # –ü–æ—á–∞—Ç–æ–∫ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∑ –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
    display_directory_structure(target_path)

if __name__ == "__main__":
    main()
